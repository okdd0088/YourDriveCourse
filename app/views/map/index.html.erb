<div id="map" class="map">
</div>

<style type="text/css">
  .map {
    height: 500px;
    width:100%;
  }
  
  .results {
    background-color: white;
    opacity: 0.8;
    position: absolute;
    top: 12px;
    right: 12px;
    width: 320px;
    height: 480px;
    overflow-y: scroll;
  }
</style>

<script type="text/javascript">
  var map = L.map('map');
  
  let DefaultIcon = L.icon({
    iconUrl: "packs/media/images/marker-icon-2b3e1faf.png",
    iconRetinaUrl: "packs/media/images/marker-icon-2x-680f69f3c2e6b90c1812a813edf67fd7.png",
    shadowUrl: "packs/media/images/marker-shadow-a0c6cc1401c107b501efee6477816891.png",
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -34],
    tooltipAnchor: [16, -28],
    shadowSize: [41, 41]
  });
  L.Marker.prototype.options.icon = DefaultIcon;
  
  
  //ここからはチュートリアル通り
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);
  
  <% @courses.each do |c| %>
    L.Routing.control({
      waypoints: [
        L.latLng(<%= c.departure_lat %>, <%= c.departure_lon %>),
          <% c.waypoints.each do |wp| %>
            L.latLng(<%= wp.lat %>, <%= wp.lon %>),
          <% end %>
        L.latLng(<%= c.arrival_lat %>, <%= c.arrival_lon %>)
      ]
    }).addTo(map);
  <% end %>
  
</script>
